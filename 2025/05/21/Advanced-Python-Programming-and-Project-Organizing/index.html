

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="">
  <meta name="keywords" content="">
  
    <meta name="description" content="asynchronous Programming in PythonWhat is asynchronous programming in pythonAsynchronous programming is a paradigm that enables programs to perform multiple tasks concurrently without blocking the exe">
<meta property="og:type" content="article">
<meta property="og:title" content="Advanced Python Programming and Project Organizing">
<meta property="og:url" content="http://example.com/2025/05/21/Advanced-Python-Programming-and-Project-Organizing/index.html">
<meta property="og:site_name" content="Elvin&#39;s Blog">
<meta property="og:description" content="asynchronous Programming in PythonWhat is asynchronous programming in pythonAsynchronous programming is a paradigm that enables programs to perform multiple tasks concurrently without blocking the exe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-05-22T01:36:06.000Z">
<meta property="article:modified_time" content="2025-05-22T03:20:48.861Z">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Advanced Python Programming and Project Organizing - Elvin&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.5-a","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Elvin&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg/bg1.JPG') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Advanced Python Programming and Project Organizing"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-05-21 21:36" pubdate>
          May 21, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          7.9k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          66 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Advanced Python Programming and Project Organizing</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="asynchronous-Programming-in-Python"><a href="#asynchronous-Programming-in-Python" class="headerlink" title="asynchronous Programming in Python"></a>asynchronous Programming in Python</h1><h2 id="What-is-asynchronous-programming-in-python"><a href="#What-is-asynchronous-programming-in-python" class="headerlink" title="What is asynchronous programming in python"></a>What is asynchronous programming in python</h2><p>Asynchronous programming is a paradigm that enables programs to perform multiple tasks concurrently without blocking the execution of the main thread. </p>
<p>Unlike traditional synchronous programming where tasks execute one after another, asynchronous programming allows a program to initiate an operation(e.g., a network request) and then yield control to other tasks while waiting for the operation to complete. </p>
<p>Once the operation is done, control is returned to the original task to continue its execution.</p>
<p>Core idea: Concurrency without Parallelish (Often)<br>The fundamental concept behind asynchronous programming in Python is concurrency, not necessarily true parallelism (which typically requires multiple CPU cores or precesses). Python’s Global Interpreter Lock (GIL) limits true multithreading for CPU-bound tasks, but asynchronous programming excels at I&#x2F;O-bound tasks.</p>
<p>The “waiting” in asynchronous programming typically refers to I&#x2F;O operations like:</p>
<ul>
<li>Network requests: Fetching data from a web API, downloading files.</li>
<li>Database queries: Waiting for a response from a database server.</li>
<li>File I&#x2F;O: Reading from or writing to disk.</li>
<li>Time delays: asyncio.sleep().<br>During these waiting periods, the program doesn’t sit idle; it can execute other waiting tasks.</li>
</ul>
<h2 id="Key-components-and-concepts"><a href="#Key-components-and-concepts" class="headerlink" title="Key components and concepts"></a>Key components and concepts</h2><ol>
<li>Event Loop:</li>
</ol>
<ul>
<li>Event loop is the heart of asynchromous programming. It’s a single-threaded loop that monitors for events (e.g., “network data arrived,” “timer expired”) and dispatches tasks to handle those events. It manages the execution flow of coroutines.</li>
<li><strong>asyncio</strong> library is python’s built-in library for writing concurrent code using the <strong>async</strong>&#x2F;<strong>await</strong> syntax. The event loop is a central part of <strong>asyncio</strong>.<br><strong>asyncio.run()</strong> can be used to start the event loop. <strong>asyncio.get_event_loop()</strong> can be used to obtain and manage the event loop directly.</li>
</ul>
<ol start="2">
<li>Coroutines (Cooperative Routines):</li>
</ol>
<ul>
<li>Functions defined with <strong>async def</strong> can pause their execution at <strong>await</strong> points and resume later. They are “cooperative” because they explicitly yield control to the event loop.</li>
<li>Calling an <strong>async def</strong> function does not execute it immediately; it returns a coroutine object. To run it, you must <strong>await</strong> it or schedule it on the event loop (e.g., using <strong>asyncio.create_task()</strong>)</li>
</ul>
<ol start="3">
<li><strong>async</strong> and <strong>await</strong>:</li>
</ol>
<ul>
<li><strong>async</strong> marks a function as a coroutine. It tells Python that this function can contain <strong>await</strong> expressions and will run cooperatively on the event loop.</li>
<li><strong>awati</strong> used inside an <strong>async def</strong> function to pause its execution until an “awaitable” (another coroutine, task, future, etc.) completes. When <strong>await</strong> is called, control is returned to the event loop, which can then run other pending tasks. it can only be used inside an <strong>async def</strong> function.</li>
</ul>
<ol start="4">
<li>Awaitables:</li>
</ol>
<ul>
<li>Awaitables are any object that can be “awaited”. the most common awaitables are:<ul>
<li>Coroutines: Objects returned by calling an <strong>async def</strong> function.</li>
<li>Tasks: Objects created by <strong>asyncio.create_task()</strong> to schedule a corountine for execution on the event loop. </li>
<li>Futures: Low-level objects representing the result of an asynchronous operation. Tasks are built on top of Future.</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name,delay</span>):<br>    <span class="hljs-keyword">await</span> asyncio.sleep(delay)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello,<span class="hljs-subst">&#123;name&#125;</span>!&quot;</span>)<br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-comment"># Creating coroutine objects (not yet running)</span><br>    coro1 = greet(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">2</span>)<br>    coro2 = greet(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">1</span>)<br>    <span class="hljs-comment">#Scheduling coroutines as tasks to run concurrently</span><br>    task1 = asyncio.create_task(coro1)<br>    taks2 = asyncio.create_task(coro2)<br>    <span class="hljs-comment">#await the completion of tasks</span><br>    <span class="hljs-keyword">await</span> task1<br>    <span class="hljs-keyword">await</span> task2<br>    <span class="hljs-comment"># Or simply await coroutines if you don&#x27;t need explicit task objects</span><br>    results = <span class="hljs-keyword">await</span> greet(<span class="hljs-string">&quot;Charlie&quot;</span>, <span class="hljs-number">0.5</span>)<br>    <span class="hljs-comment"># Running multiple awaitables concurrently and gathering results</span><br>    results = <span class="hljs-keyword">await</span> asyncio.gather(<br>        greet(<span class="hljs-string">&quot;David&quot;</span>, <span class="hljs-number">0.3</span>),<br>        greet(<span class="hljs-string">&quot;Eve&quot;</span>,<span class="hljs-number">0.1</span>)<br>    )<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;All greeting done.&quot;</span>)<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    asyncio.run(main())<br></code></pre></td></tr></table></figure>

<h2 id="Key-Libraries-and-Tools"><a href="#Key-Libraries-and-Tools" class="headerlink" title="Key Libraries and Tools"></a>Key Libraries and Tools</h2><ol>
<li><strong>asyncio</strong> (Standard Library):<br><strong>asyncio</strong> is the foundation for asynchronous I&#x2F;O in python. it provides the event loop, coroutine utilities, task management, and primitives for networking, subprocesses, and synchronization.<br>Key functions&#x2F;classes:</li>
</ol>
<ul>
<li><strong>asyncio.run(coro)</strong>: runs the given coroutine until it complete, managing the event loop automatically. Best for top-level entry point.</li>
<li><strong>asyncio.create_task(coro)</strong>: schedules a coroutine to run on the event loop as a task.</li>
<li><strong>asyncio.sleep(delay)</strong>: An awaitable that pauses the current coroutine for delay seconds, yeilding control.</li>
<li>**asyncio.gather(*awaitables)**: Runs multiple awaitables concurrently and waits for all of them to complete. Returns their results in the order they were passed.</li>
<li><strong>asyncio.Queue</strong>, <strong>asyncio.Lock</strong>, <strong>asyncio.Semaphore</strong>: Asynchronous synchronization primitives.</li>
</ul>
<ol start="2">
<li><strong>contextlib</strong> (Standard Library) - <strong>AsyncExitStack</strong> &amp; <strong>asynccontextmanager</strong>:<br><strong>AsyncExitStack</strong> provides a robust way to manage the lifecycle of multiple synchronous or asynchronous context managers, especially when their number is dynamic. <strong>asynccontextmanager</strong> is a decorator for easily creating asynchronous context managers.</li>
</ol>
<ul>
<li><p><strong>AsyncExitStack</strong> (Class) is a stack-like structure that collects cleanup operations( from <strong><strong>aexit</strong></strong>, <strong><strong>exit</strong></strong>, or custom callbacks) and executes them in LIFO order when the stack exits.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> AsyncExitStack<br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect_db</span>(<span class="hljs-params">uri</span>):<br>    <span class="hljs-comment"># simulate a asynchronously db connecting</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Connecting to <span class="hljs-subst">&#123;url&#125;</span> ...&quot;</span>)<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockConnection</span>:<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">self</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Closing connection to <span class="hljs-subst">&#123;uri&#125;</span>...&quot;</span>)<br>    <span class="hljs-keyword">return</span> MockConnection()<br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">connection_uris</span>):<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> AsyncExitStack() <span class="hljs-keyword">as</span> stack:<br>        connections = []<br>        <span class="hljs-keyword">for</span> uri <span class="hljs-keyword">in</span> connection_uris:<br>            conn = <span class="hljs-keyword">await</span> stack.enter_async_context(connect_db(uri))<br>            connections.append(conn)<br>        <span class="hljs-comment"># Now, all connections in the list connections will be automatically closed when the async with block complete.</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;All connections established. Processing data...&quot;</span>)<br>        <span class="hljs-comment"># Simulate the data processing</span><br>        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Data processing finished.&quot;</span>)<br><br><span class="hljs-keyword">import</span> asyncio<br>asyncio.run(process_data([<span class="hljs-string">&quot;db_url_1&quot;</span>,<span class="hljs-string">&quot;db_url_2&quot;</span>,<span class="hljs-string">&quot;db_url_3&quot;</span>]))<br></code></pre></td></tr></table></figure>


</li>
<li><p><strong>@asynccontextmanager</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> asynccontextmanager<br><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-meta">@asynccontextmanager</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">my_async_resource</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Acquiring async resource: <span class="hljs-subst">&#123;name&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.05</span>) <span class="hljs-comment"># Simulate async setup</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">yield</span> <span class="hljs-string">f&quot;DATA_FROM_<span class="hljs-subst">&#123;name&#125;</span>&quot;</span> <span class="hljs-comment"># Yield control to the &#x27;async with&#x27; block</span><br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Releasing async resource:<span class="hljs-subst">&#123;name&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.02</span>) <span class="hljs-comment"># Simulate async teardown</span><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">use_my_resource</span>():<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> my_async_resource(<span class="hljs-string">&quot;DB_Connection&quot;</span>) <span class="hljs-keyword">as</span> db:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Using <span class="hljs-subst">&#123;db&#125;</span>...&quot;</span>)<br>        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Finishing using DB_Connection.&#x27;)</span><br><span class="hljs-string"></span><br><span class="hljs-string"># asyncio.run(use_my_resource())</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>async with</strong> is designed to work with <strong>@asynccontextmanager</strong>. it is to ensure that asynchronous resources are properly set up(<strong><strong>aenter</strong></strong>) before a block of code executes, and properly torn down (<strong><strong>aexit</strong></strong>) afterward, even if errors occur within that block. It is the asynchronous version of <strong>with</strong><br>How it works:</p>
<ol>
<li>When pyton encounters <strong>async with expression as variable:</strong>, it first evaluates <strong>expression</strong>. This <strong>expression</strong> is expected to return an asynchronous context manager object.</li>
<li>It then <strong>awaits</strong> the <strong><strong>aenter</strong></strong> method of that context manager object. The result of <strong><strong>aenter</strong></strong> is assigned to <strong>variable</strong> (if <strong>as variable</strong> is used)</li>
<li>Then code inside the <strong>async with</strong> block then executes.</li>
<li>Crucially regardless of whether the <strong>async with</strong> block finishes normally or exits due to an exception, python guarantees that it will await the <strong><strong>aexit</strong></strong> method of the context manager.</li>
<li>The <strong><strong>aexit</strong></strong> method receives information about any exception that occurred within the block, allowing the context manager to handle or suppress it.</li>
</ol>
<p><strong>asynccontextmanager</strong> Decorator is a decorator that provide a convenient, generator-based way to create asynchronous context managers without having to write a full class with <strong>aenter</strong> and <strong><strong>aexit</strong></strong> methods. It wraps an <strong>async def</strong> generator function and transforms it into an object that adheres to the asynchronous context manager protocol.<br>How it works:</p>
<ol>
<li>define the async def function with decorator of <strong>@asynccontextmanager</strong> such as my_async_resource.</li>
<li>Inside this function, any code before the <strong>yield</strong> statement is considered the asynchronous setup logic (what would typically go in <strong><strong>aenter</strong></strong>).</li>
<li>The <strong>yield</strong> statement is the point where control is passed to the <strong>async with</strong> block. The value <strong>yield</strong>ed(e.g., f””DATA_FROM_{NAME}””) becomes the value bound to the <strong>as</strong> variable in the <strong>async with</strong> statement (e.g., db).</li>
<li>Any code after the <strong>yield</strong> statement (typically in a <strong>finally</strong> block to ensure execution) is considered the asynchronous teardown logic( what would typically go in <strong><strong>aexit</strong></strong>). This code will run when the <strong>async with</strong> blcok is exited, whether normally or due to an exception.</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Advanced Python Programming and Project Organizing</div>
      <div>http://example.com/2025/05/21/Advanced-Python-Programming-and-Project-Organizing/</div>
    </div>
    <div class="license-meta">
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>May 21, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/05/20/LLM-agents-building-with-simple-composable-patterns/" title="LLM agents building with simple, composable patterns">
                        <span class="hidden-mobile">LLM agents building with simple, composable patterns</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
